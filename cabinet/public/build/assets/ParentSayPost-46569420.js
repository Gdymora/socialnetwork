import{r as s,j as e}from"./app-2181791e.js";import $ from"./SayPost-7984fbff.js";import{M as V}from"./Modal-f47a1951.js";import G from"./JobTabContent-2868b45a.js";import{B as d}from"./Button-c48d99e5.js";import{S as K}from"./SelectButton-33279a7e.js";import Q from"./FileTabContent-4a0ab4b2.js";import W from"./LinkTabContent-94711e03.js";import{B as u}from"./react-toastify.esm-98ad1542.js";import{E as X}from"./EditableText-fe40ec2f.js";import{u as B}from"./useAxios-2971df0c.js";/* empty css            *//* empty css               *//* empty css                *//* empty css              *//* empty css                 *//* empty css              */import"./TextInput-ff385964.js";import"./transition-ad5484f3.js";import"./dialog-91f2bc47.js";import"./UploaderLot-cbb61778.js";import"./LinkPreviewModal-0c2d6540.js";const c={"text-tab-content":"_text-tab-content_qlha0_2","job-tab-content":"_job-tab-content_qlha0_2","text-tab-content-active":"_text-tab-content-active_qlha0_7","job-tab-content-active":"_job-tab-content-active_qlha0_7"},Y="_modalHeader_16evi_2",Z="_modalCloseButton_16evi_11",D="_modalContent_16evi_26",ee="_modalFooter_16evi_30",te="_inputField_16evi_37",ne="_gridBlock_16evi_44",se="_sizeCircle_16evi_50",oe="_textFlexCenter_16evi_55",l={modalHeader:Y,modalCloseButton:Z,modalContent:D,modalFooter:ee,inputField:te,gridBlock:ne,sizeCircle:se,textFlexCenter:oe};function ye({profileData:m,postData:n,onCreatePost:f,onUpdatePost:j}){const{data:x,error:_,sendRequest:w}=B(),{data:b,error:k,sendRequest:E}=B(),[v,i]=s.useState(!1),[r,M]=s.useState("text"),[g,h]=s.useState(""),[N,O]=s.useState(null),[S,p]=s.useState(""),[q,z]=s.useState(""),[F,C]=s.useState(!0);s.useEffect(()=>(n&&(i(!0),h(n.visibility==="public"?"1":"2"),T(n.content),n.links.length>0&&(o("link"),y(n.links[0])),n.media.length>0&&o("file")),()=>{i(!1),h("")}),[n]);const L=()=>o("file"),A=()=>o("job"),H=()=>o("link"),o=t=>{M(t),i(!0)},P=t=>{h(t)},R=t=>{t?(C(!1),console.log(t),O(t)):p("")},y=t=>{C(!1),z(t),p(t.title)},T=t=>{C(!1),p(t)},a=new FormData;a.append("textData",S),a.append("linkData",JSON.stringify(q)),a.append("selectedOption",g),N&&Array.from(N).forEach((t,I)=>{a.append(`fileData${I}`,t)}),s.useEffect(()=>{if(b&&j){const t=b.post;j(t),u.success("Success update Post")}if(x&&f){const t=x.post;f(t),u.success("Success create Post")}i(!1)},[b,x]),s.useEffect(()=>{const t=_||k;t&&u.error("Error:",t.message)},[_,k]);const U=()=>{a.append("_method","put"),E("post",a,{url:`/posts/${n==null?void 0:n.id}`,headers:{"Content-Type":"multipart/form-data"}})},J=()=>{w("post",a,{url:"/posts",headers:{"Content-Type":"multipart/form-data"}})};return e.jsxs(e.Fragment,{children:[m&&e.jsx($,{profileData:m,onTextClick:()=>o("text"),onFileClick:()=>o("file"),onLinkClick:()=>o("link"),onJobClick:()=>o("job")}),v&&e.jsx(V,{show:v,onClose:()=>i(!1),children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl",children:[e.jsxs("div",{className:l.modalHeader,children:[e.jsx("span",{children:"Create post"}),e.jsx("div",{className:l.modalCloseButton,onClick:()=>i(!1),children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[e.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"})]})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[80vh]",children:e.jsxs("div",{className:l.modalContent,children:[e.jsxs("div",{className:l.gridBlock,children:[e.jsx("div",{children:" "}),e.jsx("div",{className:l.textFlexCenter,children:e.jsx("p",{className:"bold"})}),e.jsx("div",{className:l.textFlexCenter,children:e.jsx(K,{size:"small",style:{backgroundColor:"lightblue"},options:[{label:"Public",value:"1"},{label:"Private",value:"2"}],onChange:P,selectedSet:g})})]}),e.jsx(X,{onChange:T,textFromUploader:S}),r==="file"&&e.jsx(Q,{className:r==="file"?c.imageTabContentActive:c.imageTabContent,onChange:R,page:"dashboard"}),r==="link"&&e.jsx(W,{className:r==="link"?c.linkTabContentActive:c.linkTabContent,onChange:y,dataLink:n==null?void 0:n.links[0]}),r==="job"&&e.jsx(G,{className:r==="job"?c.jobTabContentActive:c.jobTabContent})]})}),m&&e.jsx("div",{className:l.modalFooter,children:e.jsxs("div",{className:"flex align-items-center post_message space-between",children:[e.jsx(d,{className:"btn btn-secondary",onClick:H,children:"Link"}),e.jsx(d,{className:"but btn btn-secondary",onClick:L,children:"Image/Video"}),e.jsx(d,{className:"btn btn-secondary",onClick:A,children:"Job"})]})}),e.jsxs("div",{className:l.modalFooter,children:[!n&&e.jsx(d,{className:"btn btn-primary-send",onClick:J,disabled:F,children:"Send"}),n&&e.jsx(d,{className:"btn btn-primary-send",onClick:U,disabled:F,children:"Update"})]})]})})]})}export{ye as default};
